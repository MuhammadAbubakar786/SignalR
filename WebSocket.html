<!DOCTYPE html>
<html>
<head>
    <title>SignalR Client - Multiple Users</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/3.1.12/signalr.min.js"></script>
</head>
<body>

    <h2>Level Up Notifications - User 1</h2>
    <ul id="messages-user1"></ul>

    <h2>Level Up Notifications - User 2</h2>
    <ul id="messages-user2"></ul>

    <script>
        // ðŸ” Replace these with real JWT tokens for testing
        const user1Token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IkpBNFhldHZkLWVWeEJWaWItd2V5OWtzbkthUWFmQzRGdlNtdDVvZ2NkcFUiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiIwMjUzNTg0Yy05ZDUxLTQ4YWEtOTlmMS1mNmEzMjgxNzY3ZmQiLCJpc3MiOiJodHRwczovL2Nvc29ndWVzdHMuYjJjbG9naW4uY29tL2I1YjcyNjFjLWE3OTgtNDM0MS1hMGQwLThmNjViNTI2MzM2OC92Mi4wLyIsImV4cCI6MTc1MTkxOTUxNywibmJmIjoxNzUxODc2MzE3LCJlbWFpbCI6Im11aGFtbWFkLmFidWJha2FyQGNvc29jaWV0eS5jbyIsIm5hbWUiOiJNdWhhbW1hZCBBYnViYWthciIsImlkcF9hY2Nlc3NfdG9rZW4iOiJleUowZVhBaU9pSktWMVFpTENKdWIyNWpaU0k2SW5kMlNsUmpWbU5TZFd0QlQwbG1jbTh3UkRoRWQzcDZUR0pCVmtwbVpWaHRkamxmTFVKTlVsaDNUVWtpTENKaGJHY2lPaUpTVXpJMU5pSXNJbmcxZENJNklsOXFUbmRxWlZOdWRsUlVTemhZUldSeU5WRlZVR3RDVWt4TWJ5SXNJbXRwWkNJNklsOXFUbmRxWlZOdWRsUlVTemhZUldSeU5WRlZVR3RDVWt4TWJ5SjkuZXlKaGRXUWlPaUl3TURBd01EQXdNeTB3TURBd0xUQXdNREF0WXpBd01DMHdNREF3TURBd01EQXdNREFpTENKcGMzTWlPaUpvZEhSd2N6b3ZMM04wY3k1M2FXNWtiM2R6TG01bGRDODJZbVptTURrMk1TMW1PRFEwTFRRMU0yWXRPV1pqT1MwMU9HVTFNbVJoTnpnM1pqY3ZJaXdpYVdGMElqb3hOelV4T0RjMk1ERTNMQ0p1WW1ZaU9qRTNOVEU0TnpZd01UY3NJbVY0Y0NJNk1UYzFNVGc0TVRVNU1Td2lZV05qZENJNk1Dd2lZV055SWpvaU1TSXNJbUZqY25NaU9sc2ljREVpWFN3aVlXbHZJam9pUVZwUlFXRXZPRnBCUVVGQldubG5PRzlEVDFKWmVYWkxlR0ZYTjFOd09FZFNialJ5ZWpGVFZVVktXV0oyVTJSbFNITjRURkZMUVhCQ2FqTlBTamxRTkRWME1rNU9SR0ZtVDBGWE4xZzNkemg1TWpOdE1VbzNlR0pJVWtkVlJqRlBMelp4ZWtGS1FXTlhNbnBwUm13dk5GVkZSbmswTmxONlZpOW9RMDFPT0ZBeVV6WmphblpTYlhKd1J6bEdkV3h4UVZFMVpYZE5aV2xFUXpoV05qaENjMDFYVlUxcVlrRnZjVEZCUW1NNE9UazBkSGxSYUZoUE5FOUZTVTlLVEdwaVduWm1kRkppY0dvclozZEhJaXdpWVcxeUlqcGJJbkIzWkNJc0ltMW1ZU0pkTENKaGNIQmZaR2x6Y0d4aGVXNWhiV1VpT2lKRGIzTnZZMmxsZEhsQmNIQWlMQ0poY0hCcFpDSTZJalUwTW1ObFpETXhMVFkwTWpjdE5ETTBOQzFoTW1Rd0xXTXlNV1EwWkRJeE5Ua3lNQ0lzSW1Gd2NHbGtZV055SWpvaU1TSXNJbVpoYldsc2VWOXVZVzFsSWpvaVFXSjFZbUZyWVhJaUxDSm5hWFpsYmw5dVlXMWxJam9pVFhWb1lXMXRZV1FpTENKcFpIUjVjQ0k2SW5WelpYSWlMQ0pwY0dGa1pISWlPaUl5TWpNdU1USXpMakl5TGpJeU9TSXNJbTVoYldVaU9pSk5kV2hoYlcxaFpDQkJZblZpWVd0aGNpSXNJbTlwWkNJNkltRXlaREExTVdWakxUUmpZak10TkRReFlTMDVNbVpoTFdOaE9EQXdOV1k0WmpsbU9TSXNJbkJzWVhSbUlqb2lNeUlzSW5CMWFXUWlPaUl4TURBek1qQXdNall4TTBVNE5UazRJaXdpY21naU9pSXhMa0ZZYTBGWlVXNWZZVEJVTkZBd1YyWjVWbXBzVEdGbFNEbDNUVUZCUVVGQlFVRkJRWGRCUVVGQlFVRkJRVUZCTTBGWk5UVkJRUzRpTENKelkzQWlPaUp2Y0dWdWFXUWdjSEp2Wm1sc1pTQmxiV0ZwYkNJc0luTnBaQ0k2SWpBd05tSTVZV1k1TFdJNU56Z3RNR0U1WWkxbFlqWmlMV1ptTnpKa1kySTJORE0xTmlJc0luTnBaMjVwYmw5emRHRjBaU0k2V3lKcmJYTnBJbDBzSW5OMVlpSTZJa2c0ZUhWalJITllVVVJoV0RKelMyUnJPWE40T0U5Q2NWRnlWR295VjJ4ek9WYzRUR3RIWVc5MVNIY2lMQ0owWlc1aGJuUmZjbVZuYVc5dVgzTmpiM0JsSWpvaVJWVWlMQ0owYVdRaU9pSTJZbVptTURrMk1TMW1PRFEwTFRRMU0yWXRPV1pqT1MwMU9HVTFNbVJoTnpnM1pqY2lMQ0oxYm1seGRXVmZibUZ0WlNJNkltMTFhR0Z0YldGa0xtRmlkV0poYTJGeVFHTnZjMjlqYVdWMGVTNWpieUlzSW5Wd2JpSTZJbTExYUdGdGJXRmtMbUZpZFdKaGEyRnlRR052YzI5amFXVjBlUzVqYnlJc0luVjBhU0k2SWkxd0xXbEZaalJJZVVVMlJXRk1WR1pyVVZsdlFVRWlMQ0oyWlhJaU9pSXhMakFpTENKM2FXUnpJanBiSW1JM09XWmlaalJrTFRObFpqa3RORFk0T1MwNE1UUXpMVGMyWWpFNU5HVTROVFV3T1NKZExDSjRiWE5mWm5Sa0lqb2lUMHh1VlRFeVFWUjFTMjk2YkZWd09FaHZRbEpWYWkwME9IUnZVSEpLVVV4amMydE1VSGswTm1oUVowSmFXRlo1WWpOQ2JHSnRPWGxrUjJkMFdraE9kR04zSWl3aWVHMXpYMmxrY21Wc0lqb2lNU0F4T0NJc0luaHRjMTl6ZENJNmV5SnpkV0lpT2lKSWRXc3lhWFIzYTFKelF6TXlaSGRNZVVwS1FsUkRlbUowZFRoblRqWktSMHBJTkhSeVJHUmFTbVpqSW4wc0luaHRjMTkwWTJSMElqb3hOalEzTWpVek56azJmUS5hNTgxLVhzVzR5OFB0ZHVqM2dEWTVsQzhrUU5pQVJxZ0g4aXBRRGxmeXQ5ZnhNVUtaekNGUlpZYklwRTVuYldKaWZrdXdZM0Fla2xGR09nRkFTbHp0dGpNalljbjgydVJEdHRPOFI3U2M4T082NjVWZ2N0RWZLZDhIYjZzQlIwRmpLR1hMSi1vdmlqN1hHQ1BZQTc1dy1Ea3RPZ2pid21zWjRaV3hOcmlNRUk3RTZ0SnZ1R1p4VWdJWUtxYTFxYll5VDlHalRlMUNPTW05dDRTVWNza3FOVDdLbHdtYlZXZmVkelAtU3RlWXhJTVNjWW9HQllZMlVscUZydjNzUW9CUXBXUFpCWkJWeTJGSk14UkppTWNhWlEtUGoyUnltWWNOWnFMaTY4RU5rWEJka1d0czVZZ3cwSnRHcWUzSTlNY3ZJdG5GWmU4d3ZKMV9mRmNuWFY4RlEiLCJzdWIiOiI3Yjc0MDVmOC0xNzA0LTQ0YTQtYTEyNS1jY2I2NzMxODQ5NjEiLCJnaXZlbl9uYW1lIjoiTXVoYW1tYWQiLCJmYW1pbHlfbmFtZSI6IkFidWJha2FyIiwidGlkIjoiYjViNzI2MWMtYTc5OC00MzQxLWEwZDAtOGY2NWI1MjYzMzY4Iiwic2NwIjoiYWNjZXNzX2FzX3VzZXIiLCJhenAiOiIwMjUzNTg0Yy05ZDUxLTQ4YWEtOTlmMS1mNmEzMjgxNzY3ZmQiLCJ2ZXIiOiIxLjAiLCJpYXQiOjE3NTE4NzYzMTd9.WgR3w14lV-FmV30zqfNbRDFhm_-BWw0fC0X3Gg84mzePxriBDRJmS0dmX2_emJ9kieeBEsF66esbwB8PhrdzMMA12Kdggp0Xl5OLsio9ItKhebzsp8sR8RwpBG3I1hMYvT0-jUfmkErFiATrrgaunCmBAnth__IzO7Ih2uLwshIHRk7dhPPx0XtcRqkIzNS7Wi5ClVkcEzwWb7KU7ZrDkSPxgnfIfiY6azGYi0iD_a0t_j3FzHAKVWhg5s0TeYgNe8c6g5ZMOYkO9JI5bM8jP9ww159WpswNc6f6kHKkhmuacbjdKQb3vnQ93_SNkboIppp7qZgU5Qqwx3I1E0iBRw";
        const user2Token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IkpBNFhldHZkLWVWeEJWaWItd2V5OWtzbkthUWFmQzRGdlNtdDVvZ2NkcFUiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiIwMjUzNTg0Yy05ZDUxLTQ4YWEtOTlmMS1mNmEzMjgxNzY3ZmQiLCJpc3MiOiJodHRwczovL2Nvc29ndWVzdHMuYjJjbG9naW4uY29tL2I1YjcyNjFjLWE3OTgtNDM0MS1hMGQwLThmNjViNTI2MzM2OC92Mi4wLyIsImV4cCI6MTc1MTkxOTcwMSwibmJmIjoxNzUxODc2NTAxLCJlbWFpbCI6Im1pYW5hYnViYWthcjEzMTk5OEBnbWFpbC5jb20iLCJnaXZlbl9uYW1lIjoiTWlhbiIsImZhbWlseV9uYW1lIjoiQWJ1YmFrYXIiLCJuYW1lIjoiTWlhbiBBYnViYWthciIsImlkcF9hY2Nlc3NfdG9rZW4iOiJ5YTI5LmEwQVMzSDZOd3MweFJlUGRabHRfbUxJTFo0Y05tMzhSdEcxV3RxcGJ1QkZSOXBKMUl4YWpkUHhtX19tLUdsRVN3N3J1bXpCT2hFRVdBSFRiX0RNdU9lamh3TW5iVXlZOU1DTTEwOGFNanJYazJKY2tKNjBlU2VVamUxU3p1a3pwaDI1SkNvaE41QWluTEcyUGVZd2RyN2E2eC1FdFE4cl9JMUVMeEt1R2VmYUNnWUtBVVlTQVJjU0ZRSEdYMk1pSDRick45ZUVXNEdXbkNIZTU5YnFVdzAxNzUiLCJpZHBfcmVmcmVzaF90b2tlbiI6IntcclxuICBcInJcIjogXCIxLy8wMWVCTmlqZ25jdEZ2Q2dZSUFSQUFHQUVTTmdGLUw5SXJnNFVVYmJnXzBiTnRfLWNsc1BfZE9GeXJNQkxMdzVCRWx4SmVIaXMzblRsbDEyRHF3UWVsVDFzRUtrUEVMYmlMLVFcIixcclxuICBcImRcIjogXCJnb29nbGUuY29tXCJcclxufSIsInN1YiI6IjNkMzdmZjhkLTU0ZjMtNDEzZi04OTk3LTM1NTVlOGE5ZTQxYSIsInRpZCI6ImI1YjcyNjFjLWE3OTgtNDM0MS1hMGQwLThmNjViNTI2MzM2OCIsInNjcCI6ImFjY2Vzc19hc191c2VyIiwiYXpwIjoiMDI1MzU4NGMtOWQ1MS00OGFhLTk5ZjEtZjZhMzI4MTc2N2ZkIiwidmVyIjoiMS4wIiwiaWF0IjoxNzUxODc2NTAxfQ.ktsqQ8R3A0ObROU9YJW3qTnj3WxnPnYzxoJABPLOiUZCulqBUr-AyI_O4gdxCO7UaU7ZJeF4U5fIOMoBryLSp9c8VbsI8bqlZGuBz-vyzccRA-CfVpbCWS3huWOE9Tepy3t4Bvmn_8iiT-WvXp0iyBTOLcxF5VDdhM99wt6CBf30W4_lZNQZhAtfMHpjvEzhKlT8Y1UfddfBnK9aqyDo2sGvT2Aq5FHMNN3fTymw5RutcHJpfXrGFFtcxhbWzbBDTV4Uzf1n-UizSi0SGU4I8ES2MWXt_8GUdcb8vC5pj5hfqEZ6nGchUTo0yQDswX0sFdx17NSX3ZzbUAmcd3ZPCg";

        function setupSignalRConnection(token, messageContainerId, userLabel) {
            const connection = new signalR.HubConnectionBuilder()
                .withUrl("https://dashboard.cosociety.io/apidev/leveluphub", {
                    accessTokenFactory: () => token
                })
                .withAutomaticReconnect()
                .configureLogging(signalR.LogLevel.Information)
                .build();

            connection.on("LevelUpNotification", function (result) {
                console.log(`[SignalR][${userLabel}] Received LevelUpNotification:`, result);

                const messageText = `<strong>${result.displayName} (ID: ${result.userId}) leveled up to Level ${result.newLevel}</strong>`;
                const li = document.createElement("li");
                li.innerHTML = messageText;
                document.getElementById(messageContainerId).appendChild(li);
            });

            connection.start()
                .then(() => console.log(`[SignalR][${userLabel}] Connected.`))
                .catch(err => console.error(`[SignalR][${userLabel}] Connection error:`, err));
        }

        $(document).ready(function () {
            if (user1Token) {
                setupSignalRConnection(user1Token, "messages-user1", "User 1");
            }

            if (user2Token) {
                setupSignalRConnection(user2Token, "messages-user2", "User 2");
            }
        });
    </script>

</body>
</html>
